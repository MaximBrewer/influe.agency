import{a as e,r as u,j as i,n as k,d as b,R as D,u as L,F as v}from"./app-c9e88e37.js";import{A as $}from"./ArrowDown-857bbbbd.js";import{A as j}from"./AuthenticatedLayout-7a15ad2c.js";import{t as x}from"./timestatuses-092695e6.js";import{B as z}from"./Book-85e7946d.js";import"./ApplicationLogo-fef6d1cf.js";import"./SecondaryButton-60ed226d.js";import"./react-select.esm-a2a1bf97.js";import"./InputError-6c0eeddd.js";import"./InputLabel-d74d52a5.js";import"./PrimaryButton-058440e7.js";import"./times-a8679635.js";const M=r=>e("svg",{className:r.className,viewBox:"0 0 7 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M6.28906 12.1074C6.21615 12.1621 6.13412 12.1894 6.04297 12.1894C5.95182 12.1894 5.87891 12.1621 5.82422 12.1074L0.0820472 6.39256C0.0273597 6.31965 1.64212e-05 6.23762 1.64252e-05 6.14647C1.64291e-05 6.05532 0.0273597 5.98241 0.0820472 5.92772L5.82422 0.185547C5.87891 0.130859 5.95183 0.103516 6.04297 0.103516C6.13412 0.103516 6.21615 0.130859 6.28906 0.185547L6.83594 0.73242C6.89063 0.787108 6.91797 0.860024 6.91797 0.95117C6.91797 1.04232 6.89063 1.12435 6.83594 1.19726L1.88673 6.14647L6.83594 11.0957C6.89062 11.1686 6.91797 11.2506 6.91797 11.3418C6.91797 11.4329 6.89062 11.5058 6.83594 11.5605L6.28906 12.1074Z",fill:"currentColor"})}),Y=r=>e("svg",{className:r.className,viewBox:"0 0 8 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M1.21289 0.185575C1.28581 0.130888 1.36784 0.103544 1.45898 0.103544C1.55013 0.103544 1.62304 0.130888 1.67773 0.185575L7.41991 5.90041C7.47459 5.97332 7.50194 6.05535 7.50194 6.1465C7.50194 6.23764 7.47459 6.31056 7.41991 6.36525L1.67773 12.1074C1.62304 12.1621 1.55013 12.1895 1.45898 12.1895C1.36784 12.1895 1.28581 12.1621 1.21289 12.1074L0.666015 11.5605C0.611328 11.5059 0.583984 11.4329 0.583984 11.3418C0.583984 11.2507 0.611328 11.1686 0.666015 11.0957L5.61522 6.1465L0.666015 1.19729C0.611328 1.12437 0.583984 1.04234 0.583984 0.951199C0.583984 0.860053 0.611328 0.787137 0.666015 0.73245L1.21289 0.185575Z",fill:"currentColor"})}),A=r=>{const{item:d,date:n,specialist:h}=r,{setModal:p,moment:o}=L();let c=o(n,"DD.MM.YYYY").day()===0?6:o(n,"DD.MM.YYYY").day()-1,t=h.books.find(s=>s.date==n&&s.time==d.time),m=!t||t.start===t.time;return e(v,{children:m?e("div",{onClick:s=>{s.preventDefault(),p(e(z,{...r,item:d,date:n}))},className:`overflow-hidden relative ${d.days[c]!=="rest"?"cursor-pointer":""} ${t?`row-span-${Math.ceil(t.duration/15)}`:""}  border-l px-px leading-tight py-px flex flex-col items-center justify-center border-violet-500 border-b border-b-dashed border-violet-500 ${t?`${x.find(s=>s.code==="active").color}`:`${x.find(s=>s.code===d.days[c]).color}`}`,children:t?i(v,{children:[e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.fio}),e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.phone?t.patient.phone:t.patient.email})]}):i("div",{children:[" ",e("br",{})," "]})}):""})},g=r=>{const{direction:d}=r;return e(v,{children:e("div",{className:"h-10 px-4 flex items-center",children:e("span",{children:d.title})})})},I=r=>{const{pagetitle:d,date:n,prevDate:h,nextDate:p,patient:o,branch:c,specialists:t,direction:m,dateText:f,directions:s}=r,[w,N]=u.useState(!1);return i(j,{auth:r.auth,errors:r.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:d}),children:[e(k,{title:d}),i("div",{className:"shadow-block rounded-lg bg-white text-sm overflow-hidden flex flex-col p-1 mb-3 min-h-[33.33vh]",children:[i("div",{className:"py-5 px-6 flex space-x-6",children:[i("div",{className:"flex capitalize rounded-lg bg-blue-50 overflow-hidden transition flex items-center justify-between min-w-[285px]",children:[e(b,{href:route("recieption.book.direction",{patient:o.id,branch:c.id,direction:m.id,date:h}),className:"py-2.5 px-4 hover:bg-slate-100",children:e(M,{className:"w-2 h-auto"})}),e("span",{children:f}),e(b,{href:route("recieption.book.direction",{patient:o.id,branch:c.id,direction:m.id,date:p}),className:"py-2.5 px-4 hover:bg-slate-100",children:e(Y,{className:"w-2 h-auto"})})]}),i("div",{className:"relative capitalize",children:[i("a",{href:"#",onClick:a=>{a.preventDefault(),a.stopPropagation(),N(l=>!l)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition pr-4 flex items-center justify-between min-w-[285px]",children:[e("div",{className:"flex space-x-3 items-center",children:e(g,{direction:m})}),e($,{className:"w-[.875rem] h-auto"})]}),w?e("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full overflow-y-auto max-h-[24rem]",children:s.data.map((a,l)=>e("li",{className:"",children:e(b,{className:"flex space-x-3 pr-4 hover:bg-slate-100 block w-full items-center",href:route("recieption.book.direction",{patient:o.id,branch:c.id,direction:a.id,date:n}),children:e(g,{direction:a})})},`direction-${l}`))}):""]})]}),t.data.length?e("div",{className:"overflow-auto relative w-full flex",children:i("div",{children:[i("div",{className:"grid text-center sticky top-0 z-20",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e("div",{className:"bg-slate-100"}),t.data.map((a,l)=>e("div",{className:"p-5 border-l bg-slate-100 border-l border-violet-500 capitalize",children:a.fio},`specialist-${l}`))]}),i("div",{className:"grid text-center",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e("div",{className:"h-8 border-b border-violet-500 border-dashed"}),t.data.map((a,l)=>e("div",{className:"h-8 border-l border-violet-500 border-b border-violet-500 border-b-dashed"},`specialist2-${l}`))]}),e("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:t.data[0].schedule.map((a,l)=>i(D.Fragment,{children:[i("div",{className:" sticky left-0 z-10 bg-white flex items-center justify-center border-b border-violet-500 border-dashed",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:a.time}),i("div",{children:[" ",e("br",{})," "]})]}),t.data.map((C,y)=>u.createElement(A,{...r,key:y,specialist:C,item:a}))]},l))}),i("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[i("div",{className:"sticky left-0 z-10 flex items-center justify-center",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:"19:30"}),i("div",{children:[" ",e("br",{})," "]})]}),t.data.map(a=>e("div",{className:"h-8"},a.id))]})]})}):""]}),e("div",{className:"grid grid-cols-5 gap-4 text-sm",children:x.map((a,l)=>i("div",{className:"flex items-center",children:[e("div",{className:`w-10 h-10 ${a.color} border border-black mr-3 shrink-0`}),e("div",{children:a.title})]},l))})]})};export{I as default};
