import{u as v,W as N,j as r,a as e,r as k,b as C}from"./app-37294207.js";import{P as _}from"./Pencil-4a325d01.js";import{P as y}from"./PrimaryButton-113bb876.js";import{P as I}from"./Plus-b8c7c795.js";import{I as h}from"./InputError-668fb783.js";import{I as u}from"./InputLabel-c6911704.js";import{T as p}from"./TextInput-99c0a043.js";import{I as P}from"./Info-87c7dc8c.js";import{A as D}from"./AuthenticatedLayout-a8d8a624.js";import{T as j}from"./Trash-a3cadfc3.js";import"./ApplicationLogo-a9db38cb.js";import"./SecondaryButton-dd1d5b2b.js";const x=n=>{const{branch:t=null,localities:m}=n,{setModal:s}=v(),{data:o,setData:i,post:g,patch:d,processing:b,errors:l,reset:f}=N({id:t?t.id:null,sort:t?t.sort:100,title:t?t.title:"",locality_id:t&&t.locality_id?t.locality_id:m.data[0].id}),c=a=>{i(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value)};return r("div",{children:[e("h2",{className:"font-bold text-xl text-center mb-4",children:"Филиал"}),r("form",{onSubmit:a=>{a.preventDefault(),t&&t.id?d(route("admin.branches.update",{branch:t.id}),{onSuccess:()=>{s(null)}}):g(route("admin.branches.store"),{onSuccess:()=>{s(null)}})},className:"min-w-[24rem]",children:[r("div",{className:"mb-4",children:[e(u,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e("select",{value:o.locality_id,onChange:a=>i("locality_id",a.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:m.data.map((a,w)=>e("option",{value:a.id,children:a.title},w))}),e(h,{message:l.locality_id,className:"mt-2"})]}),r("div",{className:"mb-4",children:[e(u,{htmlFor:"sort",value:"Порядок",color:"text-gray-200",weight:"normal"}),e(p,{id:"sort",type:"number",name:"sort",bg:"bg-gray-50",value:o.sort,className:"mt-1 block w-full text-xl",onChange:c}),e(h,{message:l.sort,className:"mt-2"})]}),r("div",{className:"mb-4",children:[e(u,{htmlFor:"title",value:"Наименование",color:"text-gray-200",weight:"normal"}),e(p,{id:"title",type:"text",name:"title",bg:"bg-gray-50",value:o.title,className:"mt-1 block w-full text-xl",onChange:c}),e(h,{message:l.title,className:"mt-2"})]}),e(y,{className:"w-full my-4 justify-center text-lg font-semibold",children:"Отправить"}),e("div",{className:"text-center",children:e("a",{href:"#",className:"text-red-500 underline hover:no-underline",onClick:a=>{a.preventDefault(),s(null)},children:"Отменить"})})]})]})},H=n=>{const{pagetitle:t,branches:m,errors:s={},localities:o}=n,{setModal:i}=v(),{data:g,post:d}=N({_method:"delete"}),b=l=>{d(route("admin.branches.destroy",{branch:l.id}))};return k.useEffect(()=>{s&&s.message&&i(e(P,{message:s.message,status:"error"}))},[s]),r(D,{auth:n.auth,errors:n.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:t}),children:[e(C,{title:t}),r("div",{className:"pb-12 overflow-hidden flex flex-col",children:[e("div",{className:"flex",children:r(y,{className:"mb-4",onClick:l=>i(e(x,{localities:o})),children:[e("span",{children:"Добавить"}),e(I,{className:"w-6 h-auto ml-3"})]})}),e("div",{className:"rounded-lg shadow-block bg-white px-3 pt-5 overflow-y-auto",children:m.map((l,f)=>r("div",{className:"flex space-x-5 items-center mb-5 p-5 rounded-lg bg-blue-50 hover:bg-white hover:shadow-block",children:[e("div",{className:"grow",children:e("div",{className:"font-medium text-violet-500",children:l.title})}),r("div",{className:"flex items-center space-x-4",children:[e("a",{href:"#",className:"text-violet-500",onClick:c=>{c.preventDefault(),i(e(x,{branch:l,localities:o}))},children:e(_,{className:"w-6 h-auto"})}),e("a",{href:"#",className:"text-red-500",onClick:c=>{c.preventDefault(),b(l)},children:e(j,{className:"w-6 h-auto"})})]})]},f))})]})]})};export{H as default};
