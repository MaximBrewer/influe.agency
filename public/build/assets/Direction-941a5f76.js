import{r as u,j as i,a as e,b as D,d as b,R as $,u as j,F as f}from"./app-b5f0953c.js";import{A as z}from"./ArrowDown-9d001d20.js";import{A as C}from"./AuthenticatedLayout-5fee61e6.js";import{t as x}from"./timestatuses-dee4f515.js";import{B as Y}from"./Book-6773dd61.js";import{A,a as M}from"./ArrowRight-9d300b01.js";import"./ApplicationLogo-bd1fb96b.js";import"./SecondaryButton-20d7191a.js";import"./react-select.esm-c9cdaa72.js";import"./floating-ui.dom-1f2e0c5a.js";import"./InputError-9e9d39e2.js";import"./InputLabel-bfc951ed.js";import"./PrimaryButton-f7e35d8d.js";import"./times-a0427bbc.js";const T=d=>{const{item:s,date:n,specialist:h}=d,{setModal:p,moment:o}=j();let c=o(n,"DD.MM.YYYY").day()===0?6:o(n,"DD.MM.YYYY").day()-1,t=h.books.find(l=>l.date==n&&l.time==s.time),m=!t||t.start===t.time;return e(f,{children:m?e("div",{onClick:l=>{l.preventDefault(),p(e(Y,{...d,item:s,date:n}))},className:`overflow-hidden relative ${s.days[c]!=="rest"?"cursor-pointer":""} ${t?`row-span-${Math.ceil(t.duration/5)}`:""}  border-l px-px leading-tight py-px flex flex-col items-center justify-center border-violet-500 border-b border-b-dashed border-violet-500 ${t?`${x.find(l=>l.code==="active").color}`:`${x.find(l=>l.code===s.days[c]).color}`}`,children:t?i(f,{children:[e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.fio}),e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.phone?t.patient.phone:t.patient.email})]}):i("div",{children:[" ",e("br",{})," "]})}):""})},g=d=>{const{direction:s}=d;return e(f,{children:e("div",{className:"h-10 px-4 flex items-center",children:e("span",{children:s.title})})})},Q=d=>{const{pagetitle:s,date:n,prevDate:h,nextDate:p,patient:o,branch:c,specialists:t,direction:m,dateText:v,directions:l}=d,[N,w]=u.useState(!1);return i(C,{auth:d.auth,errors:d.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:s}),children:[e(D,{title:s}),i("div",{className:"shadow-block rounded-lg bg-white text-sm overflow-hidden flex flex-col p-1 mb-3 min-h-[33.33vh]",children:[i("div",{className:"py-5 px-6 flex space-x-6",children:[i("div",{className:"flex capitalize rounded-lg bg-blue-50 overflow-hidden transition flex items-center justify-between min-w-[285px]",children:[e(b,{href:route("nurse.book.direction",{patient:o.id,branch:c.id,direction:m.id,date:h}),className:"py-2.5 px-4 hover:bg-slate-100",children:e(A,{className:"w-2 h-auto"})}),e("span",{children:v}),e(b,{href:route("nurse.book.direction",{patient:o.id,branch:c.id,direction:m.id,date:p}),className:"py-2.5 px-4 hover:bg-slate-100",children:e(M,{className:"w-2 h-auto"})})]}),i("div",{className:"relative capitalize",children:[i("a",{href:"#",onClick:a=>{a.preventDefault(),a.stopPropagation(),w(r=>!r)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition pr-4 flex items-center justify-between min-w-[285px]",children:[e("div",{className:"flex space-x-3 items-center",children:e(g,{direction:m})}),e(z,{className:"w-[.875rem] h-auto"})]}),N?e("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full overflow-y-auto max-h-[24rem]",children:l.data.map((a,r)=>e("li",{className:"",children:e(b,{className:"flex space-x-3 pr-4 hover:bg-slate-100 block w-full items-center",href:route("nurse.book.direction",{patient:o.id,branch:c.id,direction:a.id,date:n}),children:e(g,{direction:a})})},`direction-${r}`))}):""]})]}),t.data.length?e("div",{className:"overflow-auto relative w-full flex",children:i("div",{children:[i("div",{className:"grid text-center sticky top-0 z-20",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e("div",{className:"bg-slate-100"}),t.data.map((a,r)=>e("div",{className:"p-5 border-l bg-slate-100 border-l border-violet-500 capitalize",children:a.fio},`specialist-${r}`))]}),i("div",{className:"grid text-center",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e("div",{className:"h-8 border-b border-violet-500 border-dashed"}),t.data.map((a,r)=>e("div",{className:"h-8 border-l border-violet-500 border-b border-violet-500 border-b-dashed"},`specialist2-${r}`))]}),e("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:t.data[0].schedule.map((a,r)=>i($.Fragment,{children:[i("div",{className:" sticky left-0 z-10 bg-white flex items-center justify-center border-b border-violet-500 border-dashed",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:a.time}),i("div",{children:[" ",e("br",{})," "]})]}),t.data.map((y,k)=>u.createElement(T,{...d,key:k,specialist:y,item:a}))]},r))}),i("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[i("div",{className:"sticky left-0 z-10 flex items-center justify-center",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:"19:30"}),i("div",{children:[" ",e("br",{})," "]})]}),t.data.map(a=>e("div",{className:"h-8"},a.id))]})]})}):""]}),e("div",{className:"grid grid-cols-5 gap-4 text-sm",children:x.map((a,r)=>i("div",{className:"flex items-center",children:[e("div",{className:`w-10 h-10 ${a.color} border border-black mr-3 shrink-0`}),e("div",{children:a.title})]},r))})]})};export{Q as default};
