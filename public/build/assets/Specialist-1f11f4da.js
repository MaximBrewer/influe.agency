import{r as p,j as t,a as e,n as j,d as w,R as $,u as z,F as v}from"./app-c9e88e37.js";import{A as y}from"./ArrowDown-857bbbbd.js";import{A as D}from"./AuthenticatedLayout-7a15ad2c.js";import{t as b}from"./timestatuses-092695e6.js";import{B as E}from"./Book-85e7946d.js";import"./ApplicationLogo-fef6d1cf.js";import"./SecondaryButton-60ed226d.js";import"./react-select.esm-a2a1bf97.js";import"./InputError-6c0eeddd.js";import"./InputLabel-d74d52a5.js";import"./PrimaryButton-058440e7.js";import"./times-a8679635.js";const S=c=>{const{item:a,day:n,books:d,currentWeek:o}=c,{setModal:m}=z();let l=d.data.find(s=>s.date==o.days[n].date&&s.time==a.time),f=!l||l.start===l.time;return e(v,{children:f?e("div",{onClick:s=>a.days[n]!=="rest"?m(e(E,{...c,item:a,day:n})):void 0,className:`overflow-hidden relative ${a.days[n]!=="rest"?"cursor-pointer":""} ${l?`row-span-${Math.ceil(l.duration/15)}`:""} border-l px-px leading-tight py-px flex flex-col items-center justify-center border-violet-500 border-b border-b-dashed border-violet-500 ${l?`${b.find(s=>s.code==="active").color}`:`${b.find(s=>s.code===a.days[n]).color}`}`,children:l?t(v,{children:[e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:l.patient.fio}),e("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:l.patient.phone?l.patient.phone:l.patient.email})]}):t("div",{children:[" ",e("br",{})," "]})}):""})},_=c=>{const{specialist:a}=c;return t(v,{children:[e("div",{className:"w-10 h-10 bg-cover rounded bg-center",style:{backgroundImage:'url("/storage/avatar.jpeg")'}}),t("div",{children:[a.lastname,a.name?` ${a.name.substr(0,1).toUpperCase()}.`:"",a.surname?` ${a.surname.substr(0,1).toUpperCase()}.`:""]})]})},I=c=>{const{pagetitle:a,specialist:n,week:d,weeks:o,patient:m,branch:l,specialists:f}=c,s=o.find(r=>r.value==d),[h,g]=p.useState(!1),[k,x]=p.useState(!1),u=()=>{g(!1),x(!1)};return p.useEffect(()=>(h?document.addEventListener("click",u):document.removeEventListener("click",u),()=>{document.removeEventListener("click",u)}),[h]),t(D,{auth:c.auth,errors:c.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:a}),children:[e(j,{title:a}),t("div",{className:"shadow-block rounded-lg bg-white text-sm overflow-hidden flex flex-col p-1 mb-3",children:[t("div",{className:"py-5 px-6 flex space-x-6",children:[t("div",{className:"relative capitalize",children:[t("a",{href:"#",onClick:r=>{r.preventDefault(),r.stopPropagation(),g(i=>!i)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition py-2.5 px-4 flex items-center justify-between min-w-[285px]",children:[t("div",{className:"flex space-x-3 ",children:[e("span",{children:"Неделя:"}),e("span",{children:s.label})]}),e(y,{className:"w-[.875rem] h-auto"})]}),h?e("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full",children:o.map((r,i)=>e("li",{className:"text-justify w-full",children:t(w,{className:"flex space-x-3 py-2 px-3 hover:bg-slate-100 block w-full text-justify",href:route("recieption.book.specialist",{patient:m.id,branch:l.id,specialist:n.id,week:r.value,year:new Date().getFullYear()}),children:[e("span",{children:"Неделя:"}),e("span",{children:r.label})]})},i))}):""]}),t("div",{className:"relative capitalize",children:[t("a",{href:"#",onClick:r=>{r.preventDefault(),r.stopPropagation(),x(i=>!i)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition pr-4 flex items-center justify-between min-w-[285px]",children:[e("div",{className:"flex space-x-3 items-center",children:e(_,{specialist:n})}),e(y,{className:"w-[.875rem] h-auto"})]}),k?e("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full overflow-y-auto max-h-[24rem]",children:f.map((r,i)=>e("li",{className:"",children:e(w,{className:"flex space-x-3 pr-4 hover:bg-slate-100 block w-full items-center",href:route("recieption.book.specialist",{patient:m.id,branch:l.id,specialist:r.id,week:d,year:new Date().getFullYear()}),children:e(_,{specialist:r})})},i))}):""]})]}),t("div",{className:"overflow-y-auto",children:[t("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] bg-slate-100 text-center sticky top-0 z-10",children:[e("div",{className:""}),s.days.map((r,i)=>e("div",{className:`p-5 border-l ${r.today?"bg-violet-500 text-white":""} border-violet-500 capitalize`,children:r.title},i))]}),t("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr]",children:[e("div",{className:"h-8"}),[0,1,2,3,4,5,6].map(r=>e("div",{className:"h-8 border-l border-violet-500"},r))]}),e("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] leading-tight border-violet-500",children:n.schedule.map((r,i)=>t($.Fragment,{children:[t("div",{className:"relative flex items-center justify-center border-t border-dashed",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:r.time}),t("div",{children:[" ",e("br",{})," "]})]}),[0,1,2,3,4,5,6].map(N=>p.createElement(S,{...c,key:N,day:N,item:r,currentWeek:s}))]},i))}),t("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] leading-tight",children:[t("div",{className:"relative flex items-center justify-center",children:[e("div",{className:"absolute px-3 bg-white -translate-y-full",children:"19:30"}),t("div",{children:[" ",e("br",{})," "]})]}),[0,1,2,3,4,5,6].map(r=>e("div",{className:"h-8"},r))]})]})]}),e("div",{className:"grid grid-cols-5 gap-4 text-sm",children:b.map((r,i)=>t("div",{className:"flex items-center",children:[e("div",{className:`w-10 h-10 ${r.color} border border-black mr-3 shrink-0`}),e("div",{children:r.title})]},i))})]})};export{I as default};
