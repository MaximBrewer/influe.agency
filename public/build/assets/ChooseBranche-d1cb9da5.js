import{u as v,r as m,W as C,j as i,a,F as N,l as F}from"./app-37294207.js";import{I as b}from"./InputError-668fb783.js";import{I as p}from"./InputLabel-c6911704.js";import{P as D}from"./PrimaryButton-113bb876.js";import{S as f}from"./react-select.esm-534dd423.js";import"./TextInput-99c0a043.js";const g={control:(s,{data:n,isDisabled:l,isFocused:r,isSelected:o})=>({...s,minHeight:"2.625rem",borderRadius:".25rem",outline:"none",borderColor:"transparent",boxShadow:"none",backgroundColor:"#F4F4F4"}),indicatorSeparator:(s,{data:n,isDisabled:l,isFocused:r,isSelected:o})=>({...s,backgroundColor:"transparent"})},H=s=>{const{user:n,localities:l,auth:r}=s,{setModal:o}=v(),[t,y]=m.useState(r.user&&r.user.locality?l.data.find(e=>e.id===r.user.locality.id):l.data[0]),{data:c,setData:d,setError:u,get:L,post:O,patch:j,processing:k,errors:h,reset:w,transform:x}=C({user:n.id,branch:null});return m.useEffect(()=>{d(e=>({...e,branch:t&&t.branches.length?r.user&&r.user.branch?t.branches.find(S=>S.id===r.user.branch.id):t.branches[0]:null}))},[t,r]),x(e=>({user:e.user.id,branch:e.branch.id})),i("form",{onSubmit:e=>{e.preventDefault(),c.branch?(o(null),F.visit(route(`${r.user.role.name}.book.branch`,{patient:n.id,branch:c.branch.id}))):u("branch","Выберите филиал")},className:"min-w-[20rem]",children:[a("h2",{className:"font-bold text-xl text-center mb-4",children:"Филиал"}),i("div",{className:"mb-4",children:[a(p,{htmlFor:"locality",value:"Город",color:"text-gray-200",weight:"normal"}),a(f,{styles:g,defaultValue:t,isSearchable:!1,isClearable:!1,name:"locality",options:l.data,placeholder:"",getOptionLabel:e=>e.title,getOptionValue:e=>e.id,onChange:e=>y(e)}),a(b,{message:h.locality,className:"mt-2"})]}),t?i("div",{className:"mb-4",children:[a(p,{htmlFor:"branch",value:"Филиал",color:"text-gray-200",weight:"normal"}),a(f,{styles:g,value:c.branch,isSearchable:!1,isClearable:!1,name:"branch",noOptionsMessage:()=>a(N,{children:"Нет филиалов"}),options:t.branches,placeholder:"",getOptionLabel:e=>e.title,getOptionValue:e=>e.id,onChange:e=>{u("branch",null),d("branch",e)}}),a(b,{message:h.branch,className:"mt-2"})]}):"",i("div",{className:"flex flex-col space-y-3 mt-5",children:[a(D,{type:"submit",className:"justify-center",children:"Выбрать"}),a("div",{className:"text-center",children:a("a",{href:"#",className:"text-red-500 underline hover:underline-none",onClick:e=>{e.preventDefault(),o(null)},children:"Отменить"})})]})]})};export{H as C};
