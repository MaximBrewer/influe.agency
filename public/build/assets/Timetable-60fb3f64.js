import{r as g,j as t,a as e,b as y,d as u,F as k,u as v}from"./app-afe1966c.js";import{C as j,a as C}from"./ChevronRight-30274587.js";import{B as P,a as A}from"./BookStatus-7c5443ab.js";import{P as x}from"./Pencil-5b739e07.js";import{s as D}from"./statuses-52d2cf53.js";import{t as z}from"./times-a0427bbc.js";import{A as B}from"./ArrowDown-8c704b7a.js";import{A as F}from"./AuthenticatedLayout-f7a5b8e7.js";import"./InputError-5f067157.js";import"./InputLabel-3c7a9cd4.js";import"./PrimaryButton-4b82e42e.js";import"./TextInput-8d762884.js";import"./ApplicationLogo-5cbcbc0f.js";import"./SecondaryButton-7dbf6133.js";const S=i=>{const{auth:o,book:r}=i,{setModal:m}=v(),n=D.data.find(s=>s.code==r.status);return t("div",{className:"h-10 flex items-center justify-end",children:[e("div",{className:`${n.color} mr-4`,children:n.title}),e("a",{href:"#",onClick:s=>{s.preventDefault(),m(e(P,{book:r,auth:o}))},children:e(x,{className:"w-4 h-auto"})})]})},T=i=>{const{auth:o,book:r}=i,{setModal:m,priceFormat:n}=v();let s=0;for(let c of r.payments)s=+c.sum;return t("div",{className:"h-10 flex items-center justify-end",children:[e("div",{className:"text-gray-300 mr-4",children:s?n(s):"Оплата"}),e("a",{href:"#",onClick:c=>{c.preventDefault(),m(e(A,{book:r,auth:o}))},children:e(x,{className:"w-4 h-auto"})})]})},V=i=>{const{pagetitle:o,dateText:r,weekdays:m,prevweek:n,nextweek:s,books:c,branch:h,branches:N,auth:f}=i,[b,p]=g.useState(!1);return t(F,{auth:i.auth,errors:i.errors,heading:!1,children:[e(y,{title:o}),t("div",{className:"pb-12 overflow-hidden flex flex-col",children:[t("div",{className:"flex items-center justify-between",children:[t("ul",{className:"flex z-1 relative",children:[t("li",{className:"relative",children:[e("a",{href:"#",className:"block rounded-t-lg py-2.5 px-6 shadow-bb font-medium text-3xl bg-white",onClick:a=>{a.preventDefault()},children:"Записи"}),e("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]}),t("li",{className:"relative",children:[e(u,{href:route("recieption.notifications",{branch:h}),className:"block rounded-t-lg py-2.5 px-6 shadow-bb font-medium text-3xl bg-blue-50 text-blue-20",children:"Напоминания"}),e("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]})]}),t("div",{className:"relative my-1",onClick:a=>a.stopPropagation(),children:[t("a",{href:"#",onClick:a=>p(d=>!d),className:"flex itens-center justify-between rounded-lg bg-blue-50 px-4 py-2 min-w-[22.125rem]",children:[e("span",{children:h.title}),e(B,{className:"w-3 h-auto text-blue-200"})]}),b?e("ul",{className:"absolute top-full left-0 w-full rounded-lg bg-blue-50",children:N.data.map((a,d)=>e("li",{children:e(u,{href:route("recieption.timetable",{branch:a.id}),className:"block px-4 py-2 hover:text-violet-500",onClick:l=>p(!1),children:a.title})},d))}):""]})]}),t("div",{className:"shadow-bb rounded-lg bg-white py-5 px-4 overflow-hidden flex flex-col",children:[e("div",{className:"text-lg font-medium mb-5 capitalize",children:r}),t("div",{className:"flex items-center bg-slate-100 rounded-lg -mx-3",children:[e(u,{href:route("recieption.timetable",{branch:h,date:n}),className:"flex items-center shrink-0 py-4 px-4 hover:scale-110",children:e(j,{className:"h-4 w-auto"})}),e("ul",{className:"grow grid grid-cols-7 text-center py-1.5",children:m.map((a,d)=>e("li",{className:"flex justify-center",children:t(u,{href:route("recieption.timetable",{branch:h,date:a.date}),className:`py-3 px-3 rounded-lg ${a.selected?"bg-white shadow-block":"hover:bg-white hover:shadow-block"} cursor-pointer`,children:[e("div",{className:"text-violet-500",children:a.dateText}),e("div",{className:"text-[.625rem] uppercase text-gray-600",children:a.weekday})]})},d))}),e(u,{href:route("recieption.timetable",{branch:h,date:s}),className:"flex items-center shrink-0 py-4 px-4 hover:scale-110",children:e(C,{className:"h-4 w-auto"})})]}),e("div",{className:"overflow-y-auto -mr-3 pr-3",children:c.data.length?z.data.map((a,d)=>e("div",{className:"overflow-hidden",children:c.data.filter(l=>l.start==a.value).length?t(k,{children:[t("div",{className:"relative my-4",children:[e("div",{className:"absolute -left-4 -right-4 top-1/2 border border-dashed border-blue-200"}),e("div",{className:"flex",children:e("div",{className:"bg-white px-2 relative z-1 text-xs uppercase font-medium",children:a.label})})]}),c.data.filter(l=>l.start==a.value&&l.start==l.time).map((l,w)=>t("div",{className:"flex space-x-5 items-center mb-5 rounded-lg overflow-hidden py-3 bg-blue-50 hover:bg-white hover:shadow-block",children:[e("div",{className:"w-[40%] flex space-x-5 items-center pl-5",children:t("div",{className:"grow",children:[e("div",{className:"font-medium",children:l.patient.fullName}),e("div",{className:"",children:l.patient.phone?l.patient.phone:l.patient.email})]})}),e("div",{className:"text-sm w-[40%]",children:e("span",{className:"text-violet-500 font-medium",children:l.service?l.service.title:""})}),e("div",{className:"text-sm w-[20%] flex justify-end -my-3",children:t("div",{className:"pr-5",children:[e(S,{book:l,auth:f}),e(T,{book:l,auth:f})]})})]},w))]}):""},d)):e("div",{className:"relative my-4 text-center",children:e("div",{className:"text-2xl font-semibold py-8",children:"Нет записей"})})})]})]})]})};export{V as default};
