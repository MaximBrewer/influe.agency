import{u as S,r as h,_ as D,j as t,a as e,d as j,n as A}from"./app-8bcc340f.js";import{I as M}from"./input-f0b29f53.js";import{C as $,S as E}from"./SuccessButton-5be10db0.js";import{I as s}from"./InputError-d1de8c45.js";import{I as d}from"./InputLabel-06fa15f5.js";import{T as b}from"./TextInput-1bb96d7b.js";import{m as v}from"./monthes-1737a886.js";import{A as z}from"./AuthenticatedLayout-14f3f7be.js";import"./ApplicationLogo-47377c8e.js";import"./SecondaryButton-15d12e1b.js";const V=m=>{const{masseur:a=null,genders:N,localities:p}=m,{zeroPad:f}=S(),[c,x]=h.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[g,k]=h.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[y,_]=h.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:o,setData:n,post:C,patch:F,processing:B,errors:i,reset:L,transform:T}=D({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",addon:a&&a.addon?a.addon:"",gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:p.data[0].id,branch_id:a&&a.branch_id?a.branch_id:""});h.useEffect(()=>{n("birthdate",`${f(y,2)}.${f(1+1*c,2)}.${g}`)},[y,g,c]);const u=r=>{n(r.target.name,r.target.type==="checkbox"?r.target.checked:r.target.value)};return t("form",{onSubmit:r=>{r.preventDefault(),a&&a.id?F(route("admin.masseurs.update",{masseur:a.id}),{onSuccess:()=>{}}):C(route("admin.masseurs.store"),{onSuccess:()=>{}})},children:[t("div",{className:"grid grid-cols-2 gap-16",children:[t("div",{children:[t("div",{className:"mb-4",children:[e(d,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e(b,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.name,className:"mt-1 block w-full",onChange:u}),e(s,{message:i.name,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e(b,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:o.lastname,className:"mt-1 block w-full",onChange:u}),e(s,{message:i.lastname,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e(b,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.surname,className:"mt-1 block w-full",onChange:u}),e(s,{message:i.surname,className:"mt-2"})]}),t("div",{className:"grid grid-cols-2 gap-12",children:[t("div",{className:"mb-4",children:[e(d,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e(M,{mask:"0000 0000 0000",value:o.tin,unmask:!0,onAccept:(r,l)=>{u({target:{value:r,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e(s,{message:i.tin,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e(b,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.email,className:"mt-1 block w-full",onChange:u}),e(s,{message:i.email,className:"mt-2"})]})]})]}),t("div",{className:"flex flex-col",children:[t("div",{className:"mb-4",children:[e(d,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),t("div",{className:"grid grid-cols-11 gap-4",children:[e("div",{className:"col-span-3",children:e("select",{onChange:r=>_(r.target.value),defaultValue:y,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(g%4?v[c].days:v[c].days+1).fill(null).map((r,l)=>e("option",{value:l+1,children:l+1},l+1))})}),e("div",{className:"col-span-5",children:e("select",{onChange:r=>x(r.target.value),defaultValue:c,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:v.map((r,l)=>e("option",{value:l,children:r.title},l))})}),e("div",{className:"col-span-3",children:e("select",{onChange:r=>k(r.target.value),defaultValue:g,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((r,l)=>e("option",{value:l+1950,children:l+1950},l+1950))})})]}),e(s,{message:i.birthdate,className:"mt-2"})]}),t("div",{className:"grid grid-cols-3 gap-4",children:[t("div",{className:"mb-4",children:[e(d,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e("select",{value:o.gender,onChange:r=>n("gender",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:N.map((r,l)=>e("option",{value:r.value,children:r.label},l))}),e(s,{message:i.gender,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e("select",{value:o.locality_id,onChange:r=>{n("locality_id",r.target.value),n("branch_id",locality&&locality.branches.length?locality.branches[0].id:"")},className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:p.data.map((r,l)=>e("option",{value:r.id,children:r.title},l))}),e(s,{message:i.locality_id,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(d,{htmlFor:"locality_id",value:"Филиал",color:"text-gray-200",weight:"normal"}),e("select",{value:o.branch_id,onChange:r=>n("branch_id",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:p.data.map((r,l)=>e(h.Fragment,{children:r.id==o.locality_id?r.branches.map((w,I)=>e("option",{value:w.id,children:w.title},I)):""},l))}),e(s,{message:i.branch_id,className:"mt-2"})]})]}),t("div",{className:"grow mb-4 flex flex-col",children:[e(d,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e("textarea",{value:o.addon,onChange:r=>n("addon",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e(s,{message:i.birthdate,className:"mt-2"})]})]})]}),t("div",{className:"flex space-x-8 items-center justify-end",children:[e(j,{href:route("admin.masseurs.index"),children:e($,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e(E,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})},W=m=>{const{pagetitle:a}=m;return t(z,{auth:m.auth,errors:m.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:a}),children:[e(A,{title:a}),e("div",{className:"pb-12 pt-5",children:e(V,{...m})})]})};export{W as default};
