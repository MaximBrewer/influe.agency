import{u,_ as x,j as a,a as e,n as g,d as y}from"./app-74ec525c.js";import{A as N}from"./AuthenticatedLayout-a693da68.js";import"./input-7834cc71.js";import{T as v}from"./TextInput-22f3afcb.js";import{P as w}from"./Pencil-9e3bd7f1.js";import{C as k,a as C}from"./ChevronRight-be858028.js";import{I as b}from"./InputError-1144c174.js";import{I as p}from"./InputLabel-93492485.js";import{P as j}from"./PrimaryButton-8c357e09.js";import{S as D}from"./react-select.esm-194d1f43.js";import{C as S}from"./ChooseBranche-f12ac40f.js";import"./ApplicationLogo-2ca0d42f.js";import"./SecondaryButton-88359fa6.js";const F={control:(t,{data:s,isDisabled:r,isFocused:d,isSelected:i})=>({...t,minHeight:"2.625rem",borderRadius:".25rem",outline:"none",borderColor:"transparent",boxShadow:"none",backgroundColor:"#F4F4F4"}),indicatorSeparator:(t,{data:s,isDisabled:r,isFocused:d,isSelected:i})=>({...t,backgroundColor:"transparent"})},H=t=>{const{user:s,paymethods:r}=t,{setModal:d}=u(),{data:i,setData:n,post:o,patch:m,processing:c,errors:h,reset:V,transform:I}=x({user:s.id,paymethod:r.length?r[0]:null,sum:""}),f=l=>{n(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)};return a("form",{onSubmit:l=>{l.preventDefault(),m(route("recieption.patient.topup",{patient:s.id}),{onSuccess:()=>{d(null)}})},className:"min-w-[20rem]",children:[e("h2",{className:"font-bold text-xl text-center mb-4",children:"Пополнение"}),a("div",{className:"mb-4",children:[e(p,{htmlFor:"paymethod",value:"Выберите метод оплаты",color:"text-gray-200",weight:"normal"}),e(D,{styles:F,defaultValue:i.paymethod,name:"paymethod",options:r,placeholder:"",onChange:l=>n("paymethod",l)}),e(b,{message:h.paymethod,className:"mt-2"})]}),a("div",{className:"mb-4",children:[e(p,{htmlFor:"sum",value:"Введите сумму пополнения",color:"text-gray-200",weight:"normal"}),e(v,{id:"sum",type:"number",name:"sum",bg:"bg-gray-50",placeholder:"100000",border:"border border-gray-50",rounded:"rounded",value:i.sum,className:"block w-full",onChange:f}),e(b,{message:h.sum,className:"mt-2"})]}),a("div",{className:"flex flex-col space-y-3",children:[e(j,{type:"submit",className:"justify-center",children:"Пополнить"}),e("div",{className:"text-center",children:e("a",{href:"#",className:"text-red-500 underline hover:underline-none",onClick:l=>{l.preventDefault(),d(null)},children:"Отменить"})})]})]})},q=t=>{const{pagetitle:s,patient:r,auth:d,genders:i}=t,{priceFormat:n,setModal:o,moment:m}=u();return a(N,{auth:t.auth,errors:t.errors,heading:a("div",{className:"flex space-x-4 items-center",children:[e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:s}),e("a",{href:"#",onClick:c=>{c.preventDefault(),o(e(S,{...t,user:r}))},className:"text-blue-400 underline text-xl hover:no-underline",children:"Записать на прием"})]}),children:[e(g,{title:s}),a("div",{className:"rounded-lg shadow-block bg-white px-6 py-6 mb-5 relative",children:[e(y,{className:"absolute right-0 top-0 text-white bg-blue-400 w-6 h-6 flex items-center justify-center rounded-tr-lg",href:route("recieption.patient.edit",{patient:r.id}),children:e(w,{className:"w-4 h-4"})}),a("div",{className:"flex",children:[a("div",{className:"grow border-black border-r border-opacity-50 pr-5",children:[a("div",{className:"flex justify-between space-x-4 items-center",children:[a("div",{className:"font-bold text-2xl text-black",children:[r.lastname," ",r.name," ",r.surname]}),a("div",{className:"flex items-center space-x-2",children:[a("span",{children:["Баланс: ",e("span",{className:"text-blue-400",children:n(r.balance)})]}),e("a",{href:"#",onClick:c=>{c.preventDefault(),o(e(H,{...t,user:r}))},className:"w-[1.0625rem] h-[1.0625rem] rounded bg-violet-500 flex items-center justify-center text-white",children:e("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M4.7915 4.79199V0.541992H6.20817V4.79199H10.4582V6.20866H6.20817V10.4587H4.7915V6.20866H0.541504V4.79199H4.7915Z",fill:"currentColor"})})})]})]}),e("hr",{className:"border-black my-2 border-opacity-50"}),a("div",{className:"grid grid-cols-2",children:[a("div",{className:"border-black border-r border-opacity-50 pb-2",children:[e("div",{className:"mr-6 border-b border-black py-1 border-opacity-50",children:e("span",{className:"opacity-50",children:r.birthdate?m(r.birthdate).format("DD.MM.YYYY"):e("i",{children:" "})})}),e("div",{className:"mr-6 border-b border-black py-1 border-opacity-50",children:e("span",{className:"opacity-50",children:r.email})})]}),a("div",{children:[e("div",{className:"ml-6 border-b border-black py-1 border-opacity-50",children:e("span",{className:"opacity-50",children:r.tin?r.tin:e("i",{children:" "})})}),e("div",{className:"ml-6 border-b border-black py-1 border-opacity-50",children:e("span",{className:"opacity-50",children:r.gender?i.find(c=>c.value==r.gender).label:e("i",{children:" "})})})]})]})]}),a("div",{className:"shrink-0 pl-2 flex flex-col",children:[e("div",{className:"opacity-50 leading-[2rem]",children:r.locality?r.locality.title:e("i",{children:" "})}),e("hr",{className:"border-black my-2 border-opacity-50"}),e("div",{className:"grow opacity-50 mt-2 py-1.5 px-2.5 break-words border rounded-lg w-[372px] border-black border-opacity-50",children:r.addon})]})]})]}),a("div",{className:"rounded-lg shadow-block bg-white px-6 py-6 mb-5 grow flex flex-col overflow-y-hidden",children:[e("h2",{className:"text-xl font-medium mb-4",children:"История"}),a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center space-x-[.125rem] text-violet-500",children:[e("div",{className:"bg-white shadow-block w-24 h-10 flex items-center justify-center rounded-l-lg",children:e("span",{children:"Неделя"})}),e("div",{className:"bg-blue-50 w-24 h-10 flex items-center justify-center",children:e("span",{children:"Месяц"})}),e("div",{className:"bg-blue-50 w-24 h-10 flex items-center justify-center rounded-r-lg",children:e("span",{children:"Год"})})]}),a("div",{className:"flex items-center justify-between w-40 rounded-lg bg-blue-50 h-10",children:[e("a",{href:"#",className:"py-2.5 px-2 flex items-center",children:e(k,{className:"w-2 h-auto"})}),e("div",{children:"Период"}),e("a",{href:"#",className:"py-2.5 px-2 flex items-center",children:e(C,{className:"w-2 h-auto"})})]})]}),a("div",{className:"relative my-4",children:[e("div",{className:"absolute -left-6 -right-6 top-1/2 border border-dashed border-blue-200"}),e("div",{className:"flex",children:e("div",{className:"bg-white px-2 relative z-1 text-xs uppercase font-medium",children:"Последние результаты"})})]}),e("ul",{className:"grow overflow-y-auto"})]})]})};export{q as default};
