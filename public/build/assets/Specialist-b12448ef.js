import{u as j,r as h,_ as A,j as l,a as e,d as V,n as $}from"./app-759de770.js";import{I as E}from"./input-0c32ceb1.js";import{C as M,S as z}from"./SuccessButton-b4806874.js";import{I as s}from"./InputError-b32a293d.js";import{I as d}from"./InputLabel-a0463413.js";import{T as y}from"./TextInput-e4b9a49b.js";import{S as L}from"./react-select.esm-d88b32f4.js";import{m as f}from"./monthes-1737a886.js";import{A as O}from"./AuthenticatedLayout-08ad22ee.js";import"./ApplicationLogo-eebbc327.js";import"./SecondaryButton-4e219486.js";const B=c=>{const{specialist:a=null,genders:N,localities:u,directions:x}=c,{zeroPad:w}=j(),[m,k]=h.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[b,_]=h.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[v,C]=h.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:i,setData:n,post:F,patch:S,processing:T,errors:o,reset:Y,transform:I}=A({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",addon:a&&a.addon?a.addon:"",directions:a?a.directions:[],gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:u.data[0].id,branch_id:a&&a.branch_id?a.branch_id:""});h.useEffect(()=>{n("birthdate",`${w(v,2)}.${w(1+1*m,2)}.${b}`)},[v,b,m]);const g=t=>{n(t.target.name,t.target.type==="checkbox"?t.target.checked:t.target.value)};return I(t=>({...t,directions:t.directions?t.directions.map(r=>r.id):[]})),l("form",{onSubmit:t=>{t.preventDefault(),a&&a.id?S(route("admin.specialists.update",{specialist:a.id}),{onSuccess:()=>{}}):F(route("admin.specialists.store"),{onSuccess:()=>{}})},children:[l("div",{className:"grid grid-cols-2 gap-16",children:[l("div",{children:[l("div",{className:"mb-4",children:[e(d,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e(y,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.name,className:"mt-1 block w-full",onChange:g}),e(s,{message:o.name,className:"mt-2"})]}),l("div",{className:"grid grid-cols-2 gap-12",children:[l("div",{className:"mb-4",children:[e(d,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e(y,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:i.lastname,className:"mt-1 block w-full",onChange:g}),e(s,{message:o.lastname,className:"mt-2"})]}),l("div",{className:"mb-4",children:[e(d,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e(y,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.surname,className:"mt-1 block w-full",onChange:g}),e(s,{message:o.surname,className:"mt-2"})]})]}),l("div",{className:"grid grid-cols-2 gap-12",children:[l("div",{className:"mb-4",children:[e(d,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e(E,{mask:"0000 0000 0000",value:i.tin,unmask:!0,onAccept:(t,r)=>{g({target:{value:t,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e(s,{message:o.tin,className:"mt-2"})]}),l("div",{className:"mb-4",children:[e(d,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e(y,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.email,className:"mt-1 block w-full",onChange:g}),e(s,{message:o.email,className:"mt-2"})]})]}),l("div",{className:"mb-4",children:[e(d,{htmlFor:"directions",value:"Направления*",color:"text-gray-200",weight:"normal"}),e(L,{defaultValue:i.directions,isMulti:!0,name:"directions",options:x.data,getOptionLabel:t=>t.title,getOptionValue:t=>t.id,placeholder:"Выберите направления",onChange:t=>n("directions",t)}),e(s,{message:o.directions,className:"mt-2"})]})]}),l("div",{className:"flex flex-col",children:[l("div",{className:"mb-4",children:[e(d,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),l("div",{className:"grid grid-cols-11 gap-4",children:[e("div",{className:"col-span-3",children:e("select",{onChange:t=>C(t.target.value),defaultValue:v,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(b%4?f[m].days:f[m].days+1).fill(null).map((t,r)=>e("option",{value:r+1,children:r+1},r+1))})}),e("div",{className:"col-span-5",children:e("select",{onChange:t=>k(t.target.value),defaultValue:m,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:f.map((t,r)=>e("option",{value:r,children:t.title},r))})}),e("div",{className:"col-span-3",children:e("select",{onChange:t=>_(t.target.value),defaultValue:b,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((t,r)=>e("option",{value:r+1950,children:r+1950},r+1950))})})]}),e(s,{message:o.birthdate,className:"mt-2"})]}),l("div",{className:"grid grid-cols-3 gap-4",children:[l("div",{className:"mb-4",children:[e(d,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e("select",{value:i.gender,onChange:t=>n("gender",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:N.map((t,r)=>e("option",{value:t.value,children:t.label},r))}),e(s,{message:o.gender,className:"mt-2"})]}),l("div",{className:"mb-4",children:[e(d,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e("select",{value:i.locality_id,onChange:t=>{let r=u.data.find(p=>p.id===t.target.value);n("locality_id",t.target.value),n("branch_id",r&&r.branches.length?r.branches[0].id:"")},className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:u.data.map((t,r)=>e("option",{value:t.id,children:t.title},r))}),e(s,{message:o.locality_id,className:"mt-2"})]}),l("div",{className:"mb-4",children:[e(d,{htmlFor:"locality_id",value:"Филиал",color:"text-gray-200",weight:"normal"}),e("select",{value:i.branch_id,onChange:t=>n("branch_id",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:u.data.map((t,r)=>e(h.Fragment,{children:t.id==i.locality_id?t.branches.map((p,D)=>e("option",{value:p.id,children:p.title},D)):""},r))}),e(s,{message:o.branch_id,className:"mt-2"})]})]}),l("div",{className:"grow mb-4 flex flex-col",children:[e(d,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e("textarea",{value:i.addon,onChange:t=>n("addon",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e(s,{message:o.birthdate,className:"mt-2"})]})]})]}),l("div",{className:"flex space-x-8 items-center justify-end",children:[e(V,{href:route("admin.specialists.index"),children:e(M,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e(z,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})},ee=c=>{const{pagetitle:a}=c;return l(O,{auth:c.auth,errors:c.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:a}),children:[e($,{title:a}),e("div",{className:"pb-12 pt-5",children:e(B,{...c})})]})};export{ee as default};
