import{u as D,r as g,W as _,j as r,a as e,b as j,d as A}from"./app-a62778eb.js";import{A as E}from"./AuthenticatedLayout-415f3a89.js";import{I as $}from"./input-8fb29d7c.js";import{S as z}from"./SuccessButton-b0243acb.js";import{C as M}from"./CancelButton-82ba6dfc.js";import{I as o}from"./InputError-f7bfc153.js";import{I as s}from"./InputLabel-4a6cde8b.js";import{T as h}from"./TextInput-623efab3.js";import"./ApplicationLogo-475b098b.js";import"./SecondaryButton-dfa9bcff.js";const Q=b=>{const{pagetitle:f,patient:a=null,genders:N,localities:v}=b,p=[{days:31,title:"Января"},{days:28,title:"Февраля"},{days:31,title:"Марта"},{days:30,title:"Апреля"},{days:31,title:"Мая"},{days:30,title:"Июня"},{days:31,title:"Июля"},{days:31,title:"Августа"},{days:30,title:"Сентября"},{days:31,title:"Октября"},{days:30,title:"Ноября"},{days:31,title:"Декабря"}],{zeroPad:w}=D(),[n,x]=g.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[u,k]=g.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[y,C]=g.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:d,setData:m,post:F,patch:I,processing:V,errors:i,reset:B,transform:L}=_({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",addon:a&&a.addon?a.addon:"",gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:v.data[0].id});g.useEffect(()=>{m("birthdate",`${w(y,2)}.${w(1+1*n,2)}.${u}`)},[y,u,n]);const c=t=>{m(t.target.name,t.target.type==="checkbox"?t.target.checked:t.target.value)},S=t=>{t.preventDefault(),a&&a.id?I(route("recieption.patients.update",{patient:a.id}),{onSuccess:()=>{}}):F(route("recieption.patients.store"),{onSuccess:()=>{}})};return r(E,{auth:b.auth,errors:b.errors,heading:e("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:f}),children:[e(j,{title:f}),e("div",{className:"pb-12 pt-5",children:r("form",{onSubmit:S,children:[r("div",{className:"grid grid-cols-2 gap-16",children:[r("div",{children:[r("div",{className:"mb-4",children:[e(s,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e(h,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:d.name,className:"mt-1 block w-full",onChange:c}),e(o,{message:i.name,className:"mt-2"})]}),r("div",{className:"mb-4",children:[e(s,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e(h,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:d.lastname,className:"mt-1 block w-full",onChange:c}),e(o,{message:i.lastname,className:"mt-2"})]}),r("div",{className:"mb-4",children:[e(s,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e(h,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:d.surname,className:"mt-1 block w-full",onChange:c}),e(o,{message:i.surname,className:"mt-2"})]}),r("div",{className:"grid grid-cols-2 gap-12",children:[r("div",{className:"mb-4",children:[e(s,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e($,{mask:"0000 0000 0000",value:d.tin,unmask:!0,onAccept:(t,l)=>{c({target:{value:t,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e(o,{message:i.tin,className:"mt-2"})]}),r("div",{className:"mb-4",children:[e(s,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e(h,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:d.email,className:"mt-1 block w-full",onChange:c}),e(o,{message:i.email,className:"mt-2"})]})]})]}),r("div",{className:"flex flex-col",children:[r("div",{className:"mb-4",children:[e(s,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),r("div",{className:"grid grid-cols-11 gap-4",children:[e("div",{className:"col-span-3",children:e("select",{onChange:t=>C(t.target.value),defaultValue:y,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(u%4?p[n].days:p[n].days+1).fill(null).map((t,l)=>e("option",{value:l+1,children:l+1},l+1))})}),e("div",{className:"col-span-5",children:e("select",{onChange:t=>x(t.target.value),defaultValue:n,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:p.map((t,l)=>e("option",{value:l,children:t.title},l))})}),e("div",{className:"col-span-3",children:e("select",{onChange:t=>k(t.target.value),defaultValue:u,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((t,l)=>e("option",{value:l+1950,children:l+1950},l+1950))})})]}),e(o,{message:i.birthdate,className:"mt-2"})]}),e("div",{className:"mb-4",children:r("div",{className:"grid grid-cols-2 gap-8",children:[r("div",{className:"",children:[e(s,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e("select",{value:d.gender,onChange:t=>m("gender",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:N.map((t,l)=>e("option",{value:t.value,children:t.label},l))}),e(o,{message:i.gender,className:"mt-2"})]}),r("div",{className:"",children:[e(s,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e("select",{value:d.locality_id,onChange:t=>m("locality_id",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:v.data.map((t,l)=>e("option",{value:t.id,children:t.title},l))}),e(o,{message:i.locality_id,className:"mt-2"})]})]})}),r("div",{className:"grow mb-4 flex flex-col",children:[e(s,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e("textarea",{value:d.addon,onChange:t=>m("addon",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e(o,{message:i.birthdate,className:"mt-2"})]})]})]}),r("div",{className:"flex space-x-8 items-center justify-end",children:[e(A,{href:route("recieption.patients"),children:e(M,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e(z,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})})]})};export{Q as default};
